{"version":3,"sources":["../src/view.js"],"names":["init","cmid","window","console","log","addEventListener","onMessage","bind","event","data","uuid","Ajax","call","methodname","args","fail","err","error","Notification","alert","then","modal","getRoot","on","ModalEvents","hidden","location","reload"],"mappings":"4LACA,OACA,OACA,O,0DAEoB,QAAPA,CAAAA,IAAO,CAACC,CAAD,CAAU,CAC1BC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,yBAAnB,EACAF,MAAM,CAACG,gBAAP,CAAwB,SAAxB,CAAmCC,CAAS,CAACC,IAAV,QAAqBN,CAArB,CAAnC,CACH,C,CAED,QAASK,CAAAA,CAAT,CAAmBL,CAAnB,CAAyBO,CAAzB,CAAgC,CAE5B,GAAIC,CAAAA,CAAI,CAAGD,CAAK,CAACC,IAAjB,CACAP,MAAM,CAACC,OAAP,CAAeC,GAAf,wBAAmCK,CAAI,CAACC,IAAxC,sBAAyDT,CAAzD,GAEAU,UAAKC,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,yBADL,CAEPC,IAAI,CAAE,CAACb,IAAI,CAAEA,CAAP,CAAaS,IAAI,CAAED,CAAI,CAACC,IAAxB,CAFC,CAGPK,IAAI,CAAE,cAACC,CAAD,CAAS,CACXd,MAAM,CAACC,OAAP,CAAec,KAAf,CAAqBD,CAArB,EAEAE,UAAaC,KAAb,CAAmB,QAAnB,CAA6B,aAA7B,CAAyC,IAAzC,EAA+CC,IAA/C,CAAoD,SAAUC,CAAV,CAAiB,CACjEA,CAAK,CAACC,OAAN,GAAgBC,EAAhB,CAAmBC,UAAYC,MAA/B,CAAuC,UAAY,CAC/CvB,MAAM,CAACwB,QAAP,CAAgBC,MAAhB,IACH,CAFD,CAGH,CAJD,CAKH,CAXM,CAAD,CAAV,CAaH,C","sourcesContent":["// import * as Str from 'core/str';\nimport Ajax from 'core/ajax';\nimport Notification from 'core/notification';\nimport ModalEvents from 'core/modal_events';\n\nexport const init = (cmid) => {\n    window.console.log('Registering listener...');\n    window.addEventListener('message', onMessage.bind(this, cmid));\n};\n\nfunction onMessage(cmid, event) {\n    // TODO: check event.origin\n    var data = event.data;\n    window.console.log(`Setting UUID ${data.uuid} for cmid ${cmid}`);\n\n    Ajax.call([{\n        methodname: \"mod_daddyvideo_set_uuid\",\n        args: {cmid: cmid, uuid: data.uuid},\n        fail: (err) => {\n            window.console.error(err);\n\n            Notification.alert('Errore', 'Ti dir√≤.', 'OK').then(function (modal) {\n                modal.getRoot().on(ModalEvents.hidden, function () {\n                    window.location.reload(true);\n                });\n            });\n        }\n    }]);\n}\n"],"file":"view.min.js"}